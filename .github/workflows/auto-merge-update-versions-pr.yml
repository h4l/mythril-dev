name: "Auto-merge Update Versions Pull Request"
on:
  status:
  check_run:
    types:
      - completed
      - created
      - requested_action
      - rerequested
  check_suite:
    types:
      - completed

permissions:
  actions: write
  checks: write
  contents: write
  deployments: write
  id-token: write
  issues: write
  discussions: write
  packages: write
  pages: write
  pull-requests: write
  repository-projects: write
  security-events: write
  statuses: write

jobs:
  merge-successful-version-update-pr:
    name: Auto-merge Update Versions Pull Request
    runs-on: ubuntu-latest
    # if: github.event.check_run.conclusion == 'success'

    steps:
      - name: Check PR Status
        env:
          EVENT: ${{ toJson(github.event) }}
        run: |
          jq <<<"${EVENT:?}"
